import{environment as e,exit as r,stderr as a,stdin as t,stdout as s,terminalInput as o,terminalOutput as c,terminalStderr as n,terminalStdin as i,terminalStdout as l}from"/components/preview2-shim-browser/cli.js";import{monotonicClock as d,wallClock as b}from"/components/preview2-shim-browser/clocks.js";import{preopens as A,types as k}from"/components/preview2-shim-browser/filesystem.js";import{error as f,streams as p}from"/components/preview2-shim-browser/io.js";import{random as u}from "/components/preview2-shim-browser/random.js";const{getEnvironment:v}=e,{exit:w}=r,{getStderr:g}=a,{getStdin:y}=t,{getStdout:m}=s,{TerminalInput:h}=o,{TerminalOutput:I}=c,{getTerminalStderr:E}=n,{getTerminalStdin:X}=i,{getTerminalStdout:B}=l,{now:Z}=d,{now:C}=b,{getDirectories:N}=A,{Descriptor:R,DirectoryEntryStream:W,filesystemErrorCode:Q}=k,{Error:L}=f,{InputStream:Y,OutputStream:T}=p,{getRandomBytes:G}=u,j=e=>WebAssembly.compile("undefined"!=typeof Buffer?Buffer.from(e,"base64"):Uint8Array.from(atob(e),(e=>e.charCodeAt(0))));class ComponentError extends Error{constructor(e){const r="string"!=typeof e;super(r?e+""+" (see error.payload)":e),Object.defineProperty(this,"payload",{value:e,enumerable:r})}}let z=new DataView(new ArrayBuffer);const F=e=>z.buffer===e.buffer?z:z=new DataView(e.buffer),V="undefined"!=typeof process&&process.versions&&process.versions.node;let M;async function S(e){return V?(M=M||await import("fs/promises"),WebAssembly.compile(await M.readFile(e))):fetch(e).then(WebAssembly.compileStreaming)}function U(e){return e&&x.call(e,"payload")?e.payload:e}const x=Object.prototype.hasOwnProperty,_=WebAssembly.instantiate,H=(Symbol("resource"),Symbol.dispose||Symbol.for("dispose")),J=e=>BigInt.asUintN(64,BigInt(e));function O(e){return e>>>0}const D=new TextDecoder,$=new TextEncoder;let q,K,P,ee,re,ae,te,se,oe=0;function ce(e,r,a){if("string"!=typeof e)throw new TypeError("expected a string");if(0===e.length)return oe=0,1;let t=0,s=0,o=0;for(;e.length>0;){s=r(s,t,1,t+=2*e.length);const{read:c,written:n}=$.encodeInto(e,new Uint8Array(a.buffer,s+o,t-o));o+=n,e=e.slice(c)}return oe=o,s}function ne(){const e=Z();return J(e)}function ie(){const e=g();if(!(e instanceof T))throw Error('Resource error: Not a valid "OutputStream" resource.');var r=He++;return _e.set(r,{rep:e,own:!0}),r}function le(e){let r;switch(e){case 0:r={tag:"ok",val:void 0};break;case 1:r={tag:"err",val:void 0};break;default:throw new TypeError("invalid variant discriminant for expected")}w(r)}function de(){const e=y();if(!(e instanceof Y))throw Error('Resource error: Not a valid "InputStream" resource.');var r=xe++;return Ue.set(r,{rep:e,own:!0}),r}function be(){const e=m();if(!(e instanceof T))throw Error('Resource error: Not a valid "OutputStream" resource.');var r=He++;return _e.set(r,{rep:e,own:!0}),r}function Ae(e){var r=N(),a=r.length,t=re(0,0,4,12*a);for(let e=0;e<r.length;e++){const a=r[e],l=t+12*e;var[s,o]=a;if(!(s instanceof R))throw Error('Resource error: Not a valid "Descriptor" resource.');var c=Ke++;qe.set(c,{rep:s,own:!0}),F(ee).setInt32(l+0,c,!0);var n=ce(o,re,ee),i=oe;F(ee).setInt32(l+8,i,!0),F(ee).setInt32(l+4,n,!0)}F(ee).setInt32(e+4,a,!0),F(ee).setInt32(e+0,t,!0)}function ke(e){const r=C();var{seconds:a,nanoseconds:t}=r;F(ee).setBigInt64(e+0,J(a),!0),F(ee).setInt32(e+8,O(t),!0)}function fe(e,r,a){var t=e,s=qe.get(t).rep;let o;try{o={tag:"ok",val:R.prototype.readViaStream.call(s,BigInt.asUintN(64,r))}}catch(e){o={tag:"err",val:U(e)}}var c=o;switch(c.tag){case"ok":{const e=c.val;if(F(ee).setInt8(a+0,0,!0),!(e instanceof Y))throw Error('Resource error: Not a valid "InputStream" resource.');var n=xe++;Ue.set(n,{rep:e,own:!0}),F(ee).setInt32(a+4,n,!0);break}case"err":{const e=c.val;F(ee).setInt8(a+0,1,!0);var i=e;let r;switch(i){case"access":r=0;break;case"would-block":r=1;break;case"already":r=2;break;case"bad-descriptor":r=3;break;case"busy":r=4;break;case"deadlock":r=5;break;case"quota":r=6;break;case"exist":r=7;break;case"file-too-large":r=8;break;case"illegal-byte-sequence":r=9;break;case"in-progress":r=10;break;case"interrupted":r=11;break;case"invalid":r=12;break;case"io":r=13;break;case"is-directory":r=14;break;case"loop":r=15;break;case"too-many-links":r=16;break;case"message-size":r=17;break;case"name-too-long":r=18;break;case"no-device":r=19;break;case"no-entry":r=20;break;case"no-lock":r=21;break;case"insufficient-memory":r=22;break;case"insufficient-space":r=23;break;case"not-directory":r=24;break;case"not-empty":r=25;break;case"not-recoverable":r=26;break;case"unsupported":r=27;break;case"no-tty":r=28;break;case"no-such-device":r=29;break;case"overflow":r=30;break;case"not-permitted":r=31;break;case"pipe":r=32;break;case"read-only":r=33;break;case"invalid-seek":r=34;break;case"text-file-busy":r=35;break;case"cross-device":r=36;break;default:throw e instanceof Error&&console.error(e),new TypeError(`"${i}" is not one of the cases of error-code`)}F(ee).setInt8(a+4,r,!0);break}default:throw new TypeError("invalid variant specified for result")}}function pe(e,r,a){var t=e,s=qe.get(t).rep;let o;try{o={tag:"ok",val:R.prototype.writeViaStream.call(s,BigInt.asUintN(64,r))}}catch(e){o={tag:"err",val:U(e)}}var c=o;switch(c.tag){case"ok":{const e=c.val;if(F(ee).setInt8(a+0,0,!0),!(e instanceof T))throw Error('Resource error: Not a valid "OutputStream" resource.');var n=He++;_e.set(n,{rep:e,own:!0}),F(ee).setInt32(a+4,n,!0);break}case"err":{const e=c.val;F(ee).setInt8(a+0,1,!0);var i=e;let r;switch(i){case"access":r=0;break;case"would-block":r=1;break;case"already":r=2;break;case"bad-descriptor":r=3;break;case"busy":r=4;break;case"deadlock":r=5;break;case"quota":r=6;break;case"exist":r=7;break;case"file-too-large":r=8;break;case"illegal-byte-sequence":r=9;break;case"in-progress":r=10;break;case"interrupted":r=11;break;case"invalid":r=12;break;case"io":r=13;break;case"is-directory":r=14;break;case"loop":r=15;break;case"too-many-links":r=16;break;case"message-size":r=17;break;case"name-too-long":r=18;break;case"no-device":r=19;break;case"no-entry":r=20;break;case"no-lock":r=21;break;case"insufficient-memory":r=22;break;case"insufficient-space":r=23;break;case"not-directory":r=24;break;case"not-empty":r=25;break;case"not-recoverable":r=26;break;case"unsupported":r=27;break;case"no-tty":r=28;break;case"no-such-device":r=29;break;case"overflow":r=30;break;case"not-permitted":r=31;break;case"pipe":r=32;break;case"read-only":r=33;break;case"invalid-seek":r=34;break;case"text-file-busy":r=35;break;case"cross-device":r=36;break;default:throw e instanceof Error&&console.error(e),new TypeError(`"${i}" is not one of the cases of error-code`)}F(ee).setInt8(a+4,r,!0);break}default:throw new TypeError("invalid variant specified for result")}}function ue(e,r){var a=e,t=qe.get(a).rep;let s;try{s={tag:"ok",val:R.prototype.appendViaStream.call(t)}}catch(e){s={tag:"err",val:U(e)}}var o=s;switch(o.tag){case"ok":{const e=o.val;if(F(ee).setInt8(r+0,0,!0),!(e instanceof T))throw Error('Resource error: Not a valid "OutputStream" resource.');var c=He++;_e.set(c,{rep:e,own:!0}),F(ee).setInt32(r+4,c,!0);break}case"err":{const e=o.val;F(ee).setInt8(r+0,1,!0);var n=e;let a;switch(n){case"access":a=0;break;case"would-block":a=1;break;case"already":a=2;break;case"bad-descriptor":a=3;break;case"busy":a=4;break;case"deadlock":a=5;break;case"quota":a=6;break;case"exist":a=7;break;case"file-too-large":a=8;break;case"illegal-byte-sequence":a=9;break;case"in-progress":a=10;break;case"interrupted":a=11;break;case"invalid":a=12;break;case"io":a=13;break;case"is-directory":a=14;break;case"loop":a=15;break;case"too-many-links":a=16;break;case"message-size":a=17;break;case"name-too-long":a=18;break;case"no-device":a=19;break;case"no-entry":a=20;break;case"no-lock":a=21;break;case"insufficient-memory":a=22;break;case"insufficient-space":a=23;break;case"not-directory":a=24;break;case"not-empty":a=25;break;case"not-recoverable":a=26;break;case"unsupported":a=27;break;case"no-tty":a=28;break;case"no-such-device":a=29;break;case"overflow":a=30;break;case"not-permitted":a=31;break;case"pipe":a=32;break;case"read-only":a=33;break;case"invalid-seek":a=34;break;case"text-file-busy":a=35;break;case"cross-device":a=36;break;default:throw e instanceof Error&&console.error(e),new TypeError(`"${n}" is not one of the cases of error-code`)}F(ee).setInt8(r+4,a,!0);break}default:throw new TypeError("invalid variant specified for result")}}function ve(e,r){var a=e,t=qe.get(a).rep;let s;try{s={tag:"ok",val:R.prototype.getFlags.call(t)}}catch(e){s={tag:"err",val:U(e)}}var o=s;switch(o.tag){case"ok":{const e=o.val;F(ee).setInt8(r+0,0,!0);let a=0;if("object"==typeof e&&null!==e)a=!!e.read<<0|!!e.write<<1|!!e.fileIntegritySync<<2|!!e.dataIntegritySync<<3|!!e.requestedWriteSync<<4|!!e.mutateDirectory<<5;else if(null!=e)throw new TypeError("only an object, undefined or null can be converted to flags");F(ee).setInt8(r+1,a,!0);break}case"err":{const e=o.val;F(ee).setInt8(r+0,1,!0);var c=e;let a;switch(c){case"access":a=0;break;case"would-block":a=1;break;case"already":a=2;break;case"bad-descriptor":a=3;break;case"busy":a=4;break;case"deadlock":a=5;break;case"quota":a=6;break;case"exist":a=7;break;case"file-too-large":a=8;break;case"illegal-byte-sequence":a=9;break;case"in-progress":a=10;break;case"interrupted":a=11;break;case"invalid":a=12;break;case"io":a=13;break;case"is-directory":a=14;break;case"loop":a=15;break;case"too-many-links":a=16;break;case"message-size":a=17;break;case"name-too-long":a=18;break;case"no-device":a=19;break;case"no-entry":a=20;break;case"no-lock":a=21;break;case"insufficient-memory":a=22;break;case"insufficient-space":a=23;break;case"not-directory":a=24;break;case"not-empty":a=25;break;case"not-recoverable":a=26;break;case"unsupported":a=27;break;case"no-tty":a=28;break;case"no-such-device":a=29;break;case"overflow":a=30;break;case"not-permitted":a=31;break;case"pipe":a=32;break;case"read-only":a=33;break;case"invalid-seek":a=34;break;case"text-file-busy":a=35;break;case"cross-device":a=36;break;default:throw e instanceof Error&&console.error(e),new TypeError(`"${c}" is not one of the cases of error-code`)}F(ee).setInt8(r+1,a,!0);break}default:throw new TypeError("invalid variant specified for result")}}function we(e,r){var a=e,t=qe.get(a).rep;let s;try{s={tag:"ok",val:R.prototype.getType.call(t)}}catch(e){s={tag:"err",val:U(e)}}var o=s;switch(o.tag){case"ok":{const e=o.val;F(ee).setInt8(r+0,0,!0);var c=e;let a;switch(c){case"unknown":a=0;break;case"block-device":a=1;break;case"character-device":a=2;break;case"directory":a=3;break;case"fifo":a=4;break;case"symbolic-link":a=5;break;case"regular-file":a=6;break;case"socket":a=7;break;default:throw e instanceof Error&&console.error(e),new TypeError(`"${c}" is not one of the cases of descriptor-type`)}F(ee).setInt8(r+1,a,!0);break}case"err":{const e=o.val;F(ee).setInt8(r+0,1,!0);var n=e;let a;switch(n){case"access":a=0;break;case"would-block":a=1;break;case"already":a=2;break;case"bad-descriptor":a=3;break;case"busy":a=4;break;case"deadlock":a=5;break;case"quota":a=6;break;case"exist":a=7;break;case"file-too-large":a=8;break;case"illegal-byte-sequence":a=9;break;case"in-progress":a=10;break;case"interrupted":a=11;break;case"invalid":a=12;break;case"io":a=13;break;case"is-directory":a=14;break;case"loop":a=15;break;case"too-many-links":a=16;break;case"message-size":a=17;break;case"name-too-long":a=18;break;case"no-device":a=19;break;case"no-entry":a=20;break;case"no-lock":a=21;break;case"insufficient-memory":a=22;break;case"insufficient-space":a=23;break;case"not-directory":a=24;break;case"not-empty":a=25;break;case"not-recoverable":a=26;break;case"unsupported":a=27;break;case"no-tty":a=28;break;case"no-such-device":a=29;break;case"overflow":a=30;break;case"not-permitted":a=31;break;case"pipe":a=32;break;case"read-only":a=33;break;case"invalid-seek":a=34;break;case"text-file-busy":a=35;break;case"cross-device":a=36;break;default:throw e instanceof Error&&console.error(e),new TypeError(`"${n}" is not one of the cases of error-code`)}F(ee).setInt8(r+1,a,!0);break}default:throw new TypeError("invalid variant specified for result")}}function ge(e,r){var a=e,t=qe.get(a).rep;let s;try{s={tag:"ok",val:R.prototype.stat.call(t)}}catch(e){s={tag:"err",val:U(e)}}var o=s;switch(o.tag){case"ok":{const e=o.val;F(ee).setInt8(r+0,0,!0);var{type:c,linkCount:n,size:i,dataAccessTimestamp:l,dataModificationTimestamp:d,statusChangeTimestamp:b}=e,A=c;let a;switch(A){case"unknown":a=0;break;case"block-device":a=1;break;case"character-device":a=2;break;case"directory":a=3;break;case"fifo":a=4;break;case"symbolic-link":a=5;break;case"regular-file":a=6;break;case"socket":a=7;break;default:throw c instanceof Error&&console.error(c),new TypeError(`"${A}" is not one of the cases of descriptor-type`)}F(ee).setInt8(r+8,a,!0),F(ee).setBigInt64(r+16,J(n),!0),F(ee).setBigInt64(r+24,J(i),!0);var k=l;if(null==k)F(ee).setInt8(r+32,0,!0);else{const e=k;F(ee).setInt8(r+32,1,!0);var{seconds:f,nanoseconds:p}=e;F(ee).setBigInt64(r+40,J(f),!0),F(ee).setInt32(r+48,O(p),!0)}var u=d;if(null==u)F(ee).setInt8(r+56,0,!0);else{const e=u;F(ee).setInt8(r+56,1,!0);var{seconds:v,nanoseconds:w}=e;F(ee).setBigInt64(r+64,J(v),!0),F(ee).setInt32(r+72,O(w),!0)}var g=b;if(null==g)F(ee).setInt8(r+80,0,!0);else{const e=g;F(ee).setInt8(r+80,1,!0);var{seconds:y,nanoseconds:m}=e;F(ee).setBigInt64(r+88,J(y),!0),F(ee).setInt32(r+96,O(m),!0)}break}case"err":{const e=o.val;F(ee).setInt8(r+0,1,!0);var h=e;let a;switch(h){case"access":a=0;break;case"would-block":a=1;break;case"already":a=2;break;case"bad-descriptor":a=3;break;case"busy":a=4;break;case"deadlock":a=5;break;case"quota":a=6;break;case"exist":a=7;break;case"file-too-large":a=8;break;case"illegal-byte-sequence":a=9;break;case"in-progress":a=10;break;case"interrupted":a=11;break;case"invalid":a=12;break;case"io":a=13;break;case"is-directory":a=14;break;case"loop":a=15;break;case"too-many-links":a=16;break;case"message-size":a=17;break;case"name-too-long":a=18;break;case"no-device":a=19;break;case"no-entry":a=20;break;case"no-lock":a=21;break;case"insufficient-memory":a=22;break;case"insufficient-space":a=23;break;case"not-directory":a=24;break;case"not-empty":a=25;break;case"not-recoverable":a=26;break;case"unsupported":a=27;break;case"no-tty":a=28;break;case"no-such-device":a=29;break;case"overflow":a=30;break;case"not-permitted":a=31;break;case"pipe":a=32;break;case"read-only":a=33;break;case"invalid-seek":a=34;break;case"text-file-busy":a=35;break;case"cross-device":a=36;break;default:throw e instanceof Error&&console.error(e),new TypeError(`"${h}" is not one of the cases of error-code`)}F(ee).setInt8(r+8,a,!0);break}default:throw new TypeError("invalid variant specified for result")}}function ye(e,r){var a=e,t=Me.get(a).rep;var s=Q(t);if(null==s)F(ee).setInt8(r+0,0,!0);else{const e=s;F(ee).setInt8(r+0,1,!0);var o=e;let a;switch(o){case"access":a=0;break;case"would-block":a=1;break;case"already":a=2;break;case"bad-descriptor":a=3;break;case"busy":a=4;break;case"deadlock":a=5;break;case"quota":a=6;break;case"exist":a=7;break;case"file-too-large":a=8;break;case"illegal-byte-sequence":a=9;break;case"in-progress":a=10;break;case"interrupted":a=11;break;case"invalid":a=12;break;case"io":a=13;break;case"is-directory":a=14;break;case"loop":a=15;break;case"too-many-links":a=16;break;case"message-size":a=17;break;case"name-too-long":a=18;break;case"no-device":a=19;break;case"no-entry":a=20;break;case"no-lock":a=21;break;case"insufficient-memory":a=22;break;case"insufficient-space":a=23;break;case"not-directory":a=24;break;case"not-empty":a=25;break;case"not-recoverable":a=26;break;case"unsupported":a=27;break;case"no-tty":a=28;break;case"no-such-device":a=29;break;case"overflow":a=30;break;case"not-permitted":a=31;break;case"pipe":a=32;break;case"read-only":a=33;break;case"invalid-seek":a=34;break;case"text-file-busy":a=35;break;case"cross-device":a=36;break;default:throw e instanceof Error&&console.error(e),new TypeError(`"${o}" is not one of the cases of error-code`)}F(ee).setInt8(r+1,a,!0)}}function me(e,r,a){var t=e,s=Ue.get(t).rep;let o;try{o={tag:"ok",val:Y.prototype.read.call(s,BigInt.asUintN(64,r))}}catch(e){o={tag:"err",val:U(e)}}var c=o;switch(c.tag){case"ok":{const e=c.val;F(ee).setInt8(a+0,0,!0);var n=e,i=n.byteLength,l=re(0,0,1,1*i),d=new Uint8Array(n.buffer||n,n.byteOffset,1*i);new Uint8Array(ee.buffer,l,1*i).set(d),F(ee).setInt32(a+8,i,!0),F(ee).setInt32(a+4,l,!0);break}case"err":{const e=c.val;F(ee).setInt8(a+0,1,!0);var b=e;switch(b.tag){case"last-operation-failed":{const e=b.val;if(F(ee).setInt8(a+4,0,!0),!(e instanceof L))throw Error('Resource error: Not a valid "Error" resource.');var A=Se++;Me.set(A,{rep:e,own:!0}),F(ee).setInt32(a+8,A,!0);break}case"closed":F(ee).setInt8(a+4,1,!0);break;default:throw new TypeError(`invalid variant tag value \`${JSON.stringify(b.tag)}\` (received \`${b}\`) specified for \`StreamError\``)}break}default:throw new TypeError("invalid variant specified for result")}}function he(e,r,a){var t=e,s=Ue.get(t).rep;let o;try{o={tag:"ok",val:Y.prototype.blockingRead.call(s,BigInt.asUintN(64,r))}}catch(e){o={tag:"err",val:U(e)}}var c=o;switch(c.tag){case"ok":{const e=c.val;F(ee).setInt8(a+0,0,!0);var n=e,i=n.byteLength,l=re(0,0,1,1*i),d=new Uint8Array(n.buffer||n,n.byteOffset,1*i);new Uint8Array(ee.buffer,l,1*i).set(d),F(ee).setInt32(a+8,i,!0),F(ee).setInt32(a+4,l,!0);break}case"err":{const e=c.val;F(ee).setInt8(a+0,1,!0);var b=e;switch(b.tag){case"last-operation-failed":{const e=b.val;if(F(ee).setInt8(a+4,0,!0),!(e instanceof L))throw Error('Resource error: Not a valid "Error" resource.');var A=Se++;Me.set(A,{rep:e,own:!0}),F(ee).setInt32(a+8,A,!0);break}case"closed":F(ee).setInt8(a+4,1,!0);break;default:throw new TypeError(`invalid variant tag value \`${JSON.stringify(b.tag)}\` (received \`${b}\`) specified for \`StreamError\``)}break}default:throw new TypeError("invalid variant specified for result")}}function Ie(e,r){var a=e,t=_e.get(a).rep;let s;try{s={tag:"ok",val:T.prototype.checkWrite.call(t)}}catch(e){s={tag:"err",val:U(e)}}var o=s;switch(o.tag){case"ok":{const e=o.val;F(ee).setInt8(r+0,0,!0),F(ee).setBigInt64(r+8,J(e),!0);break}case"err":{const e=o.val;F(ee).setInt8(r+0,1,!0);var c=e;switch(c.tag){case"last-operation-failed":{const e=c.val;if(F(ee).setInt8(r+8,0,!0),!(e instanceof L))throw Error('Resource error: Not a valid "Error" resource.');var n=Se++;Me.set(n,{rep:e,own:!0}),F(ee).setInt32(r+12,n,!0);break}case"closed":F(ee).setInt8(r+8,1,!0);break;default:throw new TypeError(`invalid variant tag value \`${JSON.stringify(c.tag)}\` (received \`${c}\`) specified for \`StreamError\``)}break}default:throw new TypeError("invalid variant specified for result")}}function Ee(e,r,a,t){var s=e,o=_e.get(s).rep,c=r,n=a,i=new Uint8Array(ee.buffer.slice(c,c+1*n));let l;try{l={tag:"ok",val:T.prototype.write.call(o,i)}}catch(e){l={tag:"err",val:U(e)}}var d=l;switch(d.tag){case"ok":d.val;F(ee).setInt8(t+0,0,!0);break;case"err":{const e=d.val;F(ee).setInt8(t+0,1,!0);var b=e;switch(b.tag){case"last-operation-failed":{const e=b.val;if(F(ee).setInt8(t+4,0,!0),!(e instanceof L))throw Error('Resource error: Not a valid "Error" resource.');var A=Se++;Me.set(A,{rep:e,own:!0}),F(ee).setInt32(t+8,A,!0);break}case"closed":F(ee).setInt8(t+4,1,!0);break;default:throw new TypeError(`invalid variant tag value \`${JSON.stringify(b.tag)}\` (received \`${b}\`) specified for \`StreamError\``)}break}default:throw new TypeError("invalid variant specified for result")}}function Xe(e,r,a,t){var s=e,o=_e.get(s).rep,c=r,n=a,i=new Uint8Array(ee.buffer.slice(c,c+1*n));let l;try{l={tag:"ok",val:T.prototype.blockingWriteAndFlush.call(o,i)}}catch(e){l={tag:"err",val:U(e)}}var d=l;switch(d.tag){case"ok":d.val;F(ee).setInt8(t+0,0,!0);break;case"err":{const e=d.val;F(ee).setInt8(t+0,1,!0);var b=e;switch(b.tag){case"last-operation-failed":{const e=b.val;if(F(ee).setInt8(t+4,0,!0),!(e instanceof L))throw Error('Resource error: Not a valid "Error" resource.');var A=Se++;Me.set(A,{rep:e,own:!0}),F(ee).setInt32(t+8,A,!0);break}case"closed":F(ee).setInt8(t+4,1,!0);break;default:throw new TypeError(`invalid variant tag value \`${JSON.stringify(b.tag)}\` (received \`${b}\`) specified for \`StreamError\``)}break}default:throw new TypeError("invalid variant specified for result")}}function Be(e,r){var a=e,t=_e.get(a).rep;let s;try{s={tag:"ok",val:T.prototype.blockingFlush.call(t)}}catch(e){s={tag:"err",val:U(e)}}var o=s;switch(o.tag){case"ok":o.val;F(ee).setInt8(r+0,0,!0);break;case"err":{const e=o.val;F(ee).setInt8(r+0,1,!0);var c=e;switch(c.tag){case"last-operation-failed":{const e=c.val;if(F(ee).setInt8(r+4,0,!0),!(e instanceof L))throw Error('Resource error: Not a valid "Error" resource.');var n=Se++;Me.set(n,{rep:e,own:!0}),F(ee).setInt32(r+8,n,!0);break}case"closed":F(ee).setInt8(r+4,1,!0);break;default:throw new TypeError(`invalid variant tag value \`${JSON.stringify(c.tag)}\` (received \`${c}\`) specified for \`StreamError\``)}break}default:throw new TypeError("invalid variant specified for result")}}function Ze(e,r){var a=G(BigInt.asUintN(64,e)),t=a.byteLength,s=re(0,0,1,1*t),o=new Uint8Array(a.buffer||a,a.byteOffset,1*t);new Uint8Array(ee.buffer,s,1*t).set(o),F(ee).setInt32(r+4,t,!0),F(ee).setInt32(r+0,s,!0)}function Ce(e){var r=v(),a=r.length,t=re(0,0,4,16*a);for(let e=0;e<r.length;e++){const a=r[e],d=t+16*e;var[s,o]=a,c=ce(s,re,ee),n=oe;F(ee).setInt32(d+4,n,!0),F(ee).setInt32(d+0,c,!0);var i=ce(o,re,ee),l=oe;F(ee).setInt32(d+12,l,!0),F(ee).setInt32(d+8,i,!0)}F(ee).setInt32(e+4,a,!0),F(ee).setInt32(e+0,t,!0)}function Ne(e){var r=X();if(null==r)F(ee).setInt8(e+0,0,!0);else{const t=r;if(F(ee).setInt8(e+0,1,!0),!(t instanceof h))throw Error('Resource error: Not a valid "TerminalInput" resource.');var a=Oe++;Je.set(a,{rep:t,own:!0}),F(ee).setInt32(e+4,a,!0)}}function Re(e){var r=B();if(null==r)F(ee).setInt8(e+0,0,!0);else{const t=r;if(F(ee).setInt8(e+0,1,!0),!(t instanceof I))throw Error('Resource error: Not a valid "TerminalOutput" resource.');var a=$e++;De.set(a,{rep:t,own:!0}),F(ee).setInt32(e+4,a,!0)}}function We(e){var r=E();if(null==r)F(ee).setInt8(e+0,0,!0);else{const t=r;if(F(ee).setInt8(e+0,1,!0),!(t instanceof I))throw Error('Resource error: Not a valid "TerminalOutput" resource.');var a=$e++;De.set(a,{rep:t,own:!0}),F(ee).setInt32(e+4,a,!0)}}function Qe(e){const r=Pe.get(e);if(!r)throw Error("Resource error: Invalid handle "+e);Pe.delete(e),r.own&&r.rep[H]&&r.rep[H]()}function Le(e){const r=Me.get(e);if(!r)throw Error("Resource error: Invalid handle "+e);Me.delete(e),r.own&&r.rep[H]&&r.rep[H]()}function Ye(e){const r=Ue.get(e);if(!r)throw Error("Resource error: Invalid handle "+e);Ue.delete(e),r.own&&r.rep[H]&&r.rep[H]()}function Te(e){const r=_e.get(e);if(!r)throw Error("Resource error: Invalid handle "+e);_e.delete(e),r.own&&r.rep[H]&&r.rep[H]()}function Ge(e){const r=qe.get(e);if(!r)throw Error("Resource error: Invalid handle "+e);qe.delete(e),r.own&&r.rep[H]&&r.rep[H]()}function je(e){const r=De.get(e);if(!r)throw Error("Resource error: Invalid handle "+e);De.delete(e),r.own&&r.rep[H]&&r.rep[H]()}function ze(e){const r=Je.get(e);if(!r)throw Error("Resource error: Invalid handle "+e);Je.delete(e),r.own&&r.rep[H]&&r.rep[H]()}function Fe(e){var r=ce(e,te,ee),a=oe;const t=K["process-markdown-to-html"](r,a);let s;switch(F(ee).getUint8(t+0,!0)){case 0:{let e;switch(F(ee).getUint8(t+4,!0)){case 0:e=void 0;break;case 1:var o=F(ee).getInt32(t+8,!0),c=F(ee).getInt32(t+12,!0);e=D.decode(new Uint8Array(ee.buffer,o,c));break;default:throw new TypeError("invalid variant discriminant for option")}var n=F(ee).getInt32(t+16,!0),i=F(ee).getInt32(t+20,!0),l=D.decode(new Uint8Array(ee.buffer,n,i));let r;switch(F(ee).getUint8(t+24,!0)){case 0:r=void 0;break;case 1:{let e,a;switch(F(ee).getUint8(t+28,!0)){case 0:e=void 0;break;case 1:var d=F(ee).getInt32(t+32,!0),b=F(ee).getInt32(t+36,!0);e=D.decode(new Uint8Array(ee.buffer,d,b));break;default:throw new TypeError("invalid variant discriminant for option")}switch(F(ee).getUint8(t+40,!0)){case 0:a=void 0;break;case 1:{let e;switch(F(ee).getUint8(t+44,!0)){case 0:e=void 0;break;case 1:var A=F(ee).getInt32(t+48,!0),k=F(ee).getInt32(t+52,!0);e=D.decode(new Uint8Array(ee.buffer,A,k));break;default:throw new TypeError("invalid variant discriminant for option")}var f=F(ee).getInt32(t+56,!0),p=F(ee).getInt32(t+60,!0);a={language:e,source:D.decode(new Uint8Array(ee.buffer,f,p))};break}default:throw new TypeError("invalid variant discriminant for option")}r={title:e,codeBlock:a};break}default:throw new TypeError("invalid variant discriminant for option")}s={tag:"ok",val:{toc:e,content:l,frontmatter:r}};break}case 1:{let e;switch(F(ee).getUint8(t+4,!0)){case 0:e={tag:"nolang"};break;case 1:e={tag:"nohighlighter"};break;case 2:var u=F(ee).getInt32(t+8,!0),v=F(ee).getInt32(t+12,!0);e={tag:"could-not-build-highlighter",val:D.decode(new Uint8Array(ee.buffer,u,v))};break;case 3:var w=F(ee).getInt32(t+8,!0),g=F(ee).getInt32(t+12,!0);e={tag:"string-generation-error",val:D.decode(new Uint8Array(ee.buffer,w,g))};break;default:throw new TypeError("invalid variant discriminant for HighlightError")}s={tag:"err",val:e};break}default:throw new TypeError("invalid variant discriminant for expected")}if(se(t),"err"===s.tag)throw new ComponentError(s.val);return s.val}function Ve(e){var r=ce(e,te,ee),a=oe;const t=K["process-markdown-to-html-with-frontmatter"](r,a);let s;switch(F(ee).getUint8(t+0,!0)){case 0:{let e;switch(F(ee).getUint8(t+4,!0)){case 0:e=void 0;break;case 1:var o=F(ee).getInt32(t+8,!0),c=F(ee).getInt32(t+12,!0);e=D.decode(new Uint8Array(ee.buffer,o,c));break;default:throw new TypeError("invalid variant discriminant for option")}var n=F(ee).getInt32(t+16,!0),i=F(ee).getInt32(t+20,!0),l=D.decode(new Uint8Array(ee.buffer,n,i));let r;switch(F(ee).getUint8(t+24,!0)){case 0:r=void 0;break;case 1:{let e,a;switch(F(ee).getUint8(t+28,!0)){case 0:e=void 0;break;case 1:var d=F(ee).getInt32(t+32,!0),b=F(ee).getInt32(t+36,!0);e=D.decode(new Uint8Array(ee.buffer,d,b));break;default:throw new TypeError("invalid variant discriminant for option")}switch(F(ee).getUint8(t+40,!0)){case 0:a=void 0;break;case 1:{let e;switch(F(ee).getUint8(t+44,!0)){case 0:e=void 0;break;case 1:var A=F(ee).getInt32(t+48,!0),k=F(ee).getInt32(t+52,!0);e=D.decode(new Uint8Array(ee.buffer,A,k));break;default:throw new TypeError("invalid variant discriminant for option")}var f=F(ee).getInt32(t+56,!0),p=F(ee).getInt32(t+60,!0);a={language:e,source:D.decode(new Uint8Array(ee.buffer,f,p))};break}default:throw new TypeError("invalid variant discriminant for option")}r={title:e,codeBlock:a};break}default:throw new TypeError("invalid variant discriminant for option")}s={tag:"ok",val:{toc:e,content:l,frontmatter:r}};break}case 1:{let e;switch(F(ee).getUint8(t+4,!0)){case 0:e={tag:"nolang"};break;case 1:e={tag:"nohighlighter"};break;case 2:var u=F(ee).getInt32(t+8,!0),v=F(ee).getInt32(t+12,!0);e={tag:"could-not-build-highlighter",val:D.decode(new Uint8Array(ee.buffer,u,v))};break;case 3:var w=F(ee).getInt32(t+8,!0),g=F(ee).getInt32(t+12,!0);e={tag:"string-generation-error",val:D.decode(new Uint8Array(ee.buffer,w,g))};break;default:throw new TypeError("invalid variant discriminant for HighlightError")}s={tag:"err",val:e};break}default:throw new TypeError("invalid variant discriminant for expected")}if(se(t),"err"===s.tag)throw new ComponentError(s.val);return s.val}const Me=new Map;let Se=0;const Ue=new Map;let xe=0;const _e=new Map;let He=0;const Je=new Map;let Oe=0;const De=new Map;let $e=0;const qe=new Map;let Ke=0;const Pe=new Map;const er=(async()=>{const e=S(new URL("./femark.core.wasm",import.meta.url)),r=S(new URL("./femark.core2.wasm",import.meta.url)),a=j("AGFzbQEAAAABSQxgAX8AYAN/fn8AYAJ/fwBgBH9/f38AYAJ+fwBgBH9/f38Bf2ACf38Bf2ADf35/AX9gAX8Bf2ADf39/AX9gBH9+f38Bf2ABfwADIiEAAAEBAgICAgIBAQIDAwIEAAAAAAUGBgYHCAYGBgkFCgsEBQFwASEhB6cBIgEwAAABMQABATIAAgEzAAMBNAAEATUABQE2AAYBNwAHATgACAE5AAkCMTAACgIxMQALAjEyAAwCMTMADQIxNAAOAjE1AA8CMTYAEAIxNwARAjE4ABICMTkAEwIyMAAUAjIxABUCMjIAFgIyMwAXAjI0ABgCMjUAGQIyNgAaAjI3ABsCMjgAHAIyOQAdAjMwAB4CMzEAHwIzMgAgCCRpbXBvcnRzAQAKnQMhCQAgAEEAEQAACwkAIABBAREAAAsNACAAIAEgAkECEQEACw0AIAAgASACQQMRAQALCwAgACABQQQRAgALCwAgACABQQURAgALCwAgACABQQYRAgALCwAgACABQQcRAgALCwAgACABQQgRAgALDQAgACABIAJBCREBAAsNACAAIAEgAkEKEQEACwsAIAAgAUELEQIACw8AIAAgASACIANBDBEDAAsPACAAIAEgAiADQQ0RAwALCwAgACABQQ4RAgALCwAgACABQQ8RBAALCQAgAEEQEQAACwkAIABBEREAAAsJACAAQRIRAAALCQAgAEETEQAACw8AIAAgASACIANBFBEFAAsLACAAIAFBFREGAAsLACAAIAFBFhEGAAsLACAAIAFBFxEGAAsNACAAIAEgAkEYEQcACwkAIABBGREIAAsLACAAIAFBGhEGAAsLACAAIAFBGxEGAAsLACAAIAFBHBEGAAsNACAAIAEgAkEdEQkACw8AIAAgASACIANBHhEFAAsPACAAIAEgAiADQR8RCgALCQAgAEEgEQsACwAuCXByb2R1Y2VycwEMcHJvY2Vzc2VkLWJ5AQ13aXQtY29tcG9uZW50BjAuMjEuMAC7DgRuYW1lABMSd2l0LWNvbXBvbmVudDpzaGltAZ4OIQA3aW5kaXJlY3Qtd2FzaTpmaWxlc3lzdGVtL3ByZW9wZW5zQDAuMi4wLWdldC1kaXJlY3RvcmllcwEpaW5kaXJlY3Qtd2FzaTpjbG9ja3Mvd2FsbC1jbG9ja0AwLjIuMC1ub3cCR2luZGlyZWN0LXdhc2k6ZmlsZXN5c3RlbS90eXBlc0AwLjIuMC1bbWV0aG9kXWRlc2NyaXB0b3IucmVhZC12aWEtc3RyZWFtA0hpbmRpcmVjdC13YXNpOmZpbGVzeXN0ZW0vdHlwZXNAMC4yLjAtW21ldGhvZF1kZXNjcmlwdG9yLndyaXRlLXZpYS1zdHJlYW0ESWluZGlyZWN0LXdhc2k6ZmlsZXN5c3RlbS90eXBlc0AwLjIuMC1bbWV0aG9kXWRlc2NyaXB0b3IuYXBwZW5kLXZpYS1zdHJlYW0FQWluZGlyZWN0LXdhc2k6ZmlsZXN5c3RlbS90eXBlc0AwLjIuMC1bbWV0aG9kXWRlc2NyaXB0b3IuZ2V0LWZsYWdzBkBpbmRpcmVjdC13YXNpOmZpbGVzeXN0ZW0vdHlwZXNAMC4yLjAtW21ldGhvZF1kZXNjcmlwdG9yLmdldC10eXBlBzxpbmRpcmVjdC13YXNpOmZpbGVzeXN0ZW0vdHlwZXNAMC4yLjAtW21ldGhvZF1kZXNjcmlwdG9yLnN0YXQIOmluZGlyZWN0LXdhc2k6ZmlsZXN5c3RlbS90eXBlc0AwLjIuMC1maWxlc3lzdGVtLWVycm9yLWNvZGUJOGluZGlyZWN0LXdhc2k6aW8vc3RyZWFtc0AwLjIuMC1bbWV0aG9kXWlucHV0LXN0cmVhbS5yZWFkCkFpbmRpcmVjdC13YXNpOmlvL3N0cmVhbXNAMC4yLjAtW21ldGhvZF1pbnB1dC1zdHJlYW0uYmxvY2tpbmctcmVhZAtAaW5kaXJlY3Qtd2FzaTppby9zdHJlYW1zQDAuMi4wLVttZXRob2Rdb3V0cHV0LXN0cmVhbS5jaGVjay13cml0ZQw6aW5kaXJlY3Qtd2FzaTppby9zdHJlYW1zQDAuMi4wLVttZXRob2Rdb3V0cHV0LXN0cmVhbS53cml0ZQ1NaW5kaXJlY3Qtd2FzaTppby9zdHJlYW1zQDAuMi4wLVttZXRob2Rdb3V0cHV0LXN0cmVhbS5ibG9ja2luZy13cml0ZS1hbmQtZmx1c2gOQ2luZGlyZWN0LXdhc2k6aW8vc3RyZWFtc0AwLjIuMC1bbWV0aG9kXW91dHB1dC1zdHJlYW0uYmxvY2tpbmctZmx1c2gPMmluZGlyZWN0LXdhc2k6cmFuZG9tL3JhbmRvbUAwLjIuMC1nZXQtcmFuZG9tLWJ5dGVzEDNpbmRpcmVjdC13YXNpOmNsaS9lbnZpcm9ubWVudEAwLjIuMC1nZXQtZW52aXJvbm1lbnQROWluZGlyZWN0LXdhc2k6Y2xpL3Rlcm1pbmFsLXN0ZGluQDAuMi4wLWdldC10ZXJtaW5hbC1zdGRpbhI7aW5kaXJlY3Qtd2FzaTpjbGkvdGVybWluYWwtc3Rkb3V0QDAuMi4wLWdldC10ZXJtaW5hbC1zdGRvdXQTO2luZGlyZWN0LXdhc2k6Y2xpL3Rlcm1pbmFsLXN0ZGVyckAwLjIuMC1nZXQtdGVybWluYWwtc3RkZXJyFCVhZGFwdC13YXNpX3NuYXBzaG90X3ByZXZpZXcxLWZkX3dyaXRlFSdhZGFwdC13YXNpX3NuYXBzaG90X3ByZXZpZXcxLXJhbmRvbV9nZXQWKGFkYXB0LXdhc2lfc25hcHNob3RfcHJldmlldzEtZW52aXJvbl9nZXQXLmFkYXB0LXdhc2lfc25hcHNob3RfcHJldmlldzEtZW52aXJvbl9zaXplc19nZXQYK2FkYXB0LXdhc2lfc25hcHNob3RfcHJldmlldzEtY2xvY2tfdGltZV9nZXQZJWFkYXB0LXdhc2lfc25hcHNob3RfcHJldmlldzEtZmRfY2xvc2UaKmFkYXB0LXdhc2lfc25hcHNob3RfcHJldmlldzEtZmRfZmRzdGF0X2dldBswYWRhcHQtd2FzaV9zbmFwc2hvdF9wcmV2aWV3MS1mZF9mZHN0YXRfc2V0X2ZsYWdzHCthZGFwdC13YXNpX3NuYXBzaG90X3ByZXZpZXcxLWZkX3ByZXN0YXRfZ2V0HTBhZGFwdC13YXNpX3NuYXBzaG90X3ByZXZpZXcxLWZkX3ByZXN0YXRfZGlyX25hbWUeJGFkYXB0LXdhc2lfc25hcHNob3RfcHJldmlldzEtZmRfcmVhZB8kYWRhcHQtd2FzaV9zbmFwc2hvdF9wcmV2aWV3MS1mZF9zZWVrICZhZGFwdC13YXNpX3NuYXBzaG90X3ByZXZpZXcxLXByb2NfZXhpdA"),t=j("AGFzbQEAAAABSQxgAX8AYAN/fn8AYAJ/fwBgBH9/f38AYAJ+fwBgBH9/f38Bf2ACf38Bf2ADf35/AX9gAX8Bf2ADf39/AX9gBH9+f38Bf2ABfwACzAEiAAEwAAAAATEAAAABMgABAAEzAAEAATQAAgABNQACAAE2AAIAATcAAgABOAACAAE5AAEAAjEwAAEAAjExAAIAAjEyAAMAAjEzAAMAAjE0AAIAAjE1AAQAAjE2AAAAAjE3AAAAAjE4AAAAAjE5AAAAAjIwAAUAAjIxAAYAAjIyAAYAAjIzAAYAAjI0AAcAAjI1AAgAAjI2AAYAAjI3AAYAAjI4AAYAAjI5AAkAAjMwAAUAAjMxAAoAAjMyAAsACCRpbXBvcnRzAXABISEJJwEAQQALIQABAgMEBQYHCAkKCwwNDg8QERITFBUWFxgZGhscHR4fIAAuCXByb2R1Y2VycwEMcHJvY2Vzc2VkLWJ5AQ13aXQtY29tcG9uZW50BjAuMjEuMAAcBG5hbWUAFRR3aXQtY29tcG9uZW50OmZpeHVwcw");({exports:q}=await _(await a)),({exports:K}=await _(await e,{wasi_snapshot_preview1:{clock_time_get:q[24],environ_get:q[22],environ_sizes_get:q[23],fd_close:q[25],fd_fdstat_get:q[26],fd_fdstat_set_flags:q[27],fd_prestat_dir_name:q[29],fd_prestat_get:q[28],fd_read:q[30],fd_seek:q[31],fd_write:q[20],proc_exit:q[32],random_get:q[21]}})),({exports:P}=await _(await r,{__main_module__:{cabi_realloc:K.cabi_realloc},env:{memory:K.memory},"wasi:cli/environment@0.2.0":{"get-environment":q[16]},"wasi:cli/exit@0.2.0":{exit:le},"wasi:cli/stderr@0.2.0":{"get-stderr":ie},"wasi:cli/stdin@0.2.0":{"get-stdin":de},"wasi:cli/stdout@0.2.0":{"get-stdout":be},"wasi:cli/terminal-input@0.2.0":{"[resource-drop]terminal-input":ze},"wasi:cli/terminal-output@0.2.0":{"[resource-drop]terminal-output":je},"wasi:cli/terminal-stderr@0.2.0":{"get-terminal-stderr":q[19]},"wasi:cli/terminal-stdin@0.2.0":{"get-terminal-stdin":q[17]},"wasi:cli/terminal-stdout@0.2.0":{"get-terminal-stdout":q[18]},"wasi:clocks/monotonic-clock@0.2.0":{now:ne},"wasi:clocks/wall-clock@0.2.0":{now:q[1]},"wasi:filesystem/preopens@0.2.0":{"get-directories":q[0]},"wasi:filesystem/types@0.2.0":{"[method]descriptor.append-via-stream":q[4],"[method]descriptor.get-flags":q[5],"[method]descriptor.get-type":q[6],"[method]descriptor.read-via-stream":q[2],"[method]descriptor.stat":q[7],"[method]descriptor.write-via-stream":q[3],"[resource-drop]descriptor":Ge,"[resource-drop]directory-entry-stream":Qe,"filesystem-error-code":q[8]},"wasi:io/error@0.2.0":{"[resource-drop]error":Le},"wasi:io/streams@0.2.0":{"[method]input-stream.blocking-read":q[10],"[method]input-stream.read":q[9],"[method]output-stream.blocking-flush":q[14],"[method]output-stream.blocking-write-and-flush":q[13],"[method]output-stream.check-write":q[11],"[method]output-stream.write":q[12],"[resource-drop]input-stream":Ye,"[resource-drop]output-stream":Te},"wasi:random/random@0.2.0":{"get-random-bytes":q[15]}})),ee=K.memory,re=P.cabi_import_realloc,({exports:ae}=await _(await t,{"":{$imports:q.$imports,0:Ae,1:ke,10:he,11:Ie,12:Ee,13:Xe,14:Be,15:Ze,16:Ce,17:Ne,18:Re,19:We,2:fe,20:P.fd_write,21:P.random_get,22:P.environ_get,23:P.environ_sizes_get,24:P.clock_time_get,25:P.fd_close,26:P.fd_fdstat_get,27:P.fd_fdstat_set_flags,28:P.fd_prestat_get,29:P.fd_prestat_dir_name,3:pe,30:P.fd_read,31:P.fd_seek,32:P.proc_exit,4:ue,5:ve,6:we,7:ge,8:ye,9:me}})),te=K.cabi_realloc,se=K["cabi_post_process-markdown-to-html"]})();await er;export{Fe as processMarkdownToHtml,Ve as processMarkdownToHtmlWithFrontmatter};
